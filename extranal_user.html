<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0 shrink-to-fit=no, user-scalable=0">

  <title>ASN</title>
  <meta content="" name="descriptison">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <meta name="theme-color" content="#0B5E97">
  <link rel="icon" type="image/png" href="assets/images/logo.png" sizes="194x194">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Play|Titillium+Web|Roboto+Condensed|Changa|Lobster|Ubuntu&display=swap" rel="stylesheet">

  <!-- Style files -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <!--- Datatables --->
  <link href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
  
  <link rel="stylesheet" type="text/css" href="assets/lib/style.css">
<style type="text/css">
    /*Hide Input arrows*/
        /* Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        /* Firefox */
        input[type="number"] {
          -moz-appearance: textfield;
        }
        .main_div {
          width: 100%;
        }
        #add_newrow tbody td {
          padding-left: 0.25rem;
          padding-right: 0.25rem;
        }
        .table_padding thead tr th {
          padding-top: 10px;
          padding-bottom: 10px;
          white-space: nowrap;
        }
        .table_padding tbody tr td {
          padding-top: 5px;
          padding-bottom: 5px;
        }
        .table_fixed_height {
          max-height: 42vh;;
          overflow-y: auto;
          width: 100%;
          border-bottom: 1px solid #dcdcdc;
        }
        .read_only {
          user-select: none;
          cursor: not-allowed;
          pointer-events: none;
        }
        .start_date .gj-datepicker .input-group-append button {
          height: calc(1.5em + 0.55rem + 1px);
        }
        .select_box {
          max-width: 100%;
          background-color: #cac7c7;
          border: 1px solid #565656;
        }
        .selected {
          text-align: right;
          padding-top: 5px;
          padding-bottom: 5px;
          color: white;
        }
        .fill {
          width: 100%;
          background-color: #2196f3;
          text-align: center;
        }

        .time_tbl td,
        .time_tbl th {
          padding: 8px 3px;
          vertical-align: top;
          border-top: 1px solid #dee2e6;
        }
        .time_tbl input[type="radio"] {
          width: 20px;
          height: 20px;
          margin-right: 5px;
          vertical-align: bottom;
        }

        .time_tbl input[type="radio"]:after {
          content: "";
          border-bottom: 10px solid red;
          border-top: 10px solid red;
          display: block;
          opacity: 1;
        }

        .time_tbl input[type="radio"]:checked:after {
          border-bottom: 10px solid blue;
          border-top: 10px solid blue;
        }
        /*#set_timein:focus{
      box-shadow: none;
      border-bottom: 1px solid red;
    }*/
        .parsley-success {
          color: #468847;
          background-color: #dff0d8;
          border: 1px solid #d6e9c6;
        }
        .parsley-required {
          display: none;
        }
        .parsley-errors-list {
          color: red;
          list-style-type: none;
          font-size: 14px;
          margin-left: -37px;
        }
        /*.parsley-error {
    color: #B94A48;
    background-color: #F2DEDE;
    border: 1px solid #EED3D7;
  }*/
        .table_tab .nav-item.show .nav-link,
        .table_tab .nav-link.active {
          color: #fff;
          background-color: #17a2b8;
          border: 1px solid transparent;
          box-shadow: 0 0 4px 0px #000000d6;
        }

        .table_tab .nav-link {
          color: #fff;
          background-color: #e23719;
          border: 1px solid transparent;
          border-top-left-radius: 0;
          border-top-right-radius: 0;
          box-shadow: 0 0 1px #e43023;
        }

  </style>
</head>
<body>

<div class="container-fluid">
  <header>
      <nav class="navbar navbar-expand-sm justify-content-center py-0 shadow fixed-top bg_darkblue" style="border-bottom: 1px solid #1c2346;min-height: 65px;font-family: 'Montserrat',sans-serif;">
    <div class="col-2 text-center">
              <a class="navbar-brand float-left py-1 mr-0" href="#" onclick="goBack()">
        <i class="fas fa-angle-left pl-2" style="font-size: 30px;line-height: 1.7;" aria-hidden="true"></i>
      </a>
        <a href="">
        <img src="assets/images/logo3.png" height="60px">
      </a>
    </div>
    <div class="col-8 text-center text-white">
       <h4 class="mb-0">Extranal User - MOH</h4>
    </div>
    <div class="col-2 text-right text-white">
      <a href="">
        <i class="fas fa-power-off" aria-hidden="true"></i> Logout
      </a>
    </div>
  </nav>
</header>
  <main>
  <div class="container-fluid mt-5 pt-4">
    <div class="row">
            <div class="col-md-2 col-sm-2 col-12 text-center"></div>
            <div class="col-md-8 col-sm-8 col-12 text-center">
              <h4 class="text-center"><b></b></h4>
            </div>
            <div class="col-md-2 col-sm-2 col-12 pb-2 text-center"></div>
          </div>
          <div class="mb-1" style="border: 2px solid #dee2e6;">
            <form class="" action="">
              <div class="row p-1 mx-0">
                <div class="col-md-6">
                  <table class="table table-borderless mb-0">
                    <tbody>
                      <tr>
                        <td class="py-1 px-1"><b>Ship To</b></td>
                        <td class="py-1 px-0">:</td>
                        <td class="py-1 px-1">
                          <select
                            class="form-control"
                            name="ship_to"
                            id="ship_too"
                            required=""
                          >
                            <option value="">Select Location</option>
                            <option value="1"> Emergency stock-Riyadh</option>
                            <option value="2"> Emergency stock-Jeddha</option>
                            <option value="3"> Emergency stock-Dammam</option>
                          </select>
                        </td>
                      </tr>
                      <tr>
                        <td class="py-1 px-1" width="25%">
                          <b>Pallet Count</b>
                        </td>
                        <td class="py-1 px-0" width="1%">:</td>
                        <td class="py-1 px-1">
                          <input
                            type="text"
                            class="form-control-sm"
                            id="total_pallets"
                            name="total_pallet_count"
                            value="0"
                            readonly=""
                            style="width: 30%; border: 1px lightgray;"
                          />
                        </td>
                      </tr>
                      <tr>
                        <td class="py-1 px-1"><b>Invoice No</b></td>
                        <td class="py-1 px-0">:</td>
                        <td class="py-1 px-1"><input class="form-control" style="width:50%;" type="text" name="invoice_no" required="">
                         
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="col-md-6">
                  <table class="table table-borderless mb-0">
                    <tbody>

                      <tr>
                        <td class="py-1 px-1"><b>Delivery Date</b></td>
                        <td class="py-1 px-0">:</td>
                        <td class="py-1 px-1">
                          <input
                            class="form-control datepicker"
                           
                            style="width: 50%;"
                            name="delivery_date"
                            value=""
                            required=""
                          />
                          <span class="pallet_error"></span>
                        </td>
                      </tr>
                      <tr>
                        <td class="py-1 px-1"><b>Delivery Time</b></td>
                        <td class="py-1 px-0">:</td>
                        <td class="py-1 px-1">
                          <select
                            class="form-control"
                            id="selectTime"
                            onchange="time_chk()"
                            name="delivery_time"
                            style="width: 50%;"
                            required=""
                          >
                            <option value="00:00:00"
                              >Select Delivery Time</option
                            >
                            <option value="09:00:00">09:00 Am</option>
                            <option value="10:00:00">10:00 Am</option>
                            <option value="11:00:00">11:00 Am</option>
                            <option value="12:00:00">12:00 Am</option>
                            <option value="01:00:00">01:00 Pm</option>
                            <option value="02:00:00">02:00 Pm</option>
                            <option value="03:00:00">03:00 Pm</option>
                            <option value="04:00:00">04:00 Pm</option>
                          </select>
                          <span class="time_error"></span>
                        </td>
                      </tr>
                      <tr>
                        <td class="py-1 px-1"><b>Import XLSX</b></td>
                        <td class="py-1 px-0">:</td>
                        <td class="py-1 px-1"><input class="form-control-sm" style="width:50%;" type="file" name="invoice_no" required="">
                         <button class="btn btn-primary btn-sm">Submit</button>
                         <button class="btn btn-primary btn-sm">Download Template</button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </form>
          </div>
     <!--========= border close ========-->
        <div class="col-12 text-center px-0">

          <div class="row justify-content-center border-top mx-0">
            <div class="col-12 text-center px-0 table_fixed_height">
              <form
            id="temp_frm_<?=$value->id?>"
            data-parsley-validate="true"
            name="temp_frm"
            action="<?= base_url()?>web/add_batch"
            method="post"
          >
              <span class="batch_res"></span>
              <button
                class="float-right btn btn-info mb-1"
                type="button"
                onclick="add_newrow(41)"
              >
                Add New
              </button>
              <table
                class="table table-bordered"
                id="batch_table-41"
              >
                <thead class="bg-info text-white text-nowrap text-center" width="150%">
                  <tr>
                    <th width="6%">Action</th>
                    <th width="6%">Tender Name</th>
                    <th width="6%">Tender Number</th>
                    <th width="6%">Delivery Date(MM/DD/YYYY)</th>
                    <th width="6%">Nupco Code</th>
                    <th width="6%">Nupco Trade Code</th>
                    <th width="6%">Item Code</th>
                    <th width="6%">Item Physical Description</th>
                    <th width="6%">&ensp;&ensp;Po NO&ensp;&ensp;</th>
                    <th width="6%">Invoice NO</th>
                    <th width="6%">Supplier Name</th>
                    <th width="6%">Delivery Qty</th>
                    <th width="6%">Unit Price</th>
                    <th width="6%">&ensp;&ensp;Curr&ensp;&ensp;</th>
                    <th width="6%">Prod. Date(MM/DD/YYYY)</th>
                    <th width="6%">Exp. Date(MM/DD/YYYY)</th>
                    <th width="6%">Batch NO</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <button
                        class="btn btn-sm btn-danger"
                        type="button"
                        name="action2"
                        style="line-height: 1;"
                        disabled
                        onclick="delete_newroww(this)"
                      >
                        <span aria-hidden="true" style="font-size: 20px;"
                          >&times;</span
                        >
                      </button>
                    </td>
                    <td>
                      <input type="text" class="form-control" name="" value="Extranal User">
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="number"
                        name=""
                        value="12346789"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control datepicker"
                        name=""
                        id="datepicker"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="number"
                        name=""
                        value="12346789"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="number"
                        name=""
                        value="12346789"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="number"
                        name=""
                        value="12346789"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="text"
                        name=""
                        value="Extranal user"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="number"
                        name=""
                        value="12346789"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="number"
                        name=""
                        value="12346789"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="text"
                        name=""
                        value="extrals"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="number"
                        name=""
                        value="12346789"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="number"
                        name=""
                        value="12346789"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="text"
                        name=""
                        value="12346789"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control datepicker"
                        id="startDate-0"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control datepicker"
                        id="endDate-0"
                      />
                    </td>
                    <td>
                      <input
                        class="form-control"
                        type="number"
                        name=""
                        value="12346789"
                      />
                    </td>
                  </tr>
                  <input
                    type="hidden"
                    id="bat_row_<?=$value->id?>"
                    name="bat_row_<?=$value->id?>"
                    value="<?=$value->open_qty?>"
                  />
                </tbody>
              </table>
           
            
            <input type="hidden" name="vendor_no" id="<?=$value->vendor_no?>" />
            <input type="hidden" name="po_no" value="<?=$value->po_no?>" />
            <input
              type="hidden"
              name="po_item_no"
              value="<?=$value->po_item?>"
            />
          </form>
            </div>

          </div>
        </div>
      <center class="my-1 mt-2">
        <a class="btn btn-info" href="create_new_gr.html" type="submit" value="submit"> Send Request </a>
      </center> 
  </div>
  </main>
</div>

<!-- script files -->
  <script src="https://kit.fontawesome.com/80895110d5.js" crossorigin="anonymous"></script>
  <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
  <!--- Datatables --->
  <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" type="text/javascript"></script>
  <!-- date picker -->
  <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
  <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript">
  /*Add Dyanmic row in batch*/
    function add_newrow($item_no) {
      //alert($item_no);
      var table = document.getElementById("batch_table-"+$item_no);
      var row = table.insertRow();
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
      var cell3 = row.insertCell(2);
      var cell4 = row.insertCell(3);
      var cell5 = row.insertCell(4);
      var cell6 = row.insertCell(5);
      var cell7 = row.insertCell(6);
      var cell8 = row.insertCell(7);
      var cell9 = row.insertCell(8);
      var cell10 = row.insertCell(9);
      var cell11 = row.insertCell(10);
      var cell12 = row.insertCell(11);
      var cell13 = row.insertCell(12);
      var cell14 = row.insertCell(13);
      var cell15 = row.insertCell(14);
      var cell16 = row.insertCell(15);
      var cell17 = row.insertCell(16);
      cell1.innerHTML = '<button class="btn btn-sm btn-danger" type="button" name="action2" style="line-height: 1;" onclick="delete_newroww(this,'+$item_no+')"><span aria-hidden="true" style="font-size: 20px;">&times;</span></button>';
      cell2.innerHTML = '<input class="form-control" type="text" name="" value="Extranal user"/>';
      cell3.innerHTML = '<input class="form-control" type="number" name="" value="12346789"/>';
      cell4.innerHTML = '<input class="form-control datepicker" type=""';
      cell5.innerHTML = '<input class="form-control" type="number" name="" value="12346789"/>';
      cell6.innerHTML = '<input class="form-control" type="number" name="" value="12346789"/>';
      cell7.innerHTML = '<input class="form-control" type="number" name="" value="12346789"/>';
      cell8.innerHTML = '<input class="form-control" type="text" name="" value="Extranal user"/>';
      cell9.innerHTML = '<input class="form-control" type="number" name="" value="12346789"/>';
      cell10.innerHTML = '<input class="form-control" type="number" name="" value="12346789"/>';
      cell11.innerHTML = '<input class="form-control" type="text" name="" value="Extranal user"/>';
      cell12.innerHTML = '<input class="form-control" type="number" name="" value="12346789"/>';
      cell13.innerHTML = '<input class="form-control" type="number" name="" value="12346789"/>';
      cell14.innerHTML = '<input class="form-control" type="text" name="" value="Extranal user"/>';
      cell15.innerHTML = '<input class="form-control datepicker" id="startDate-0"/>';
      cell16.innerHTML = '<input class="form-control datepicker" id="endDate-0"/>'; 
      cell17.innerHTML = '<input class="form-control" type="number" name="" value="12346789" />';
    }
  /*End Add Dyanmic row in batch*/
  /* submit batch*/
    function submitBtn(item_id) {
     if ($('#temp_frm_'+item_id).parsley().validate()){
      var sum = 0;var 
      opqty = $('#bat_row_'+item_id).val();
      $(".popup_qty_"+item_id).each(function(){
         sum += +$(this).val();
      });

      if(sum<=opqty){
        $.ajax({ // create an AJAX call...
          data: $('#temp_frm_'+item_id).serialize(), // get the form data
          type: "post", // GET or POST
          url: "<?= base_url()?>web/add_batch", // the file to call
          success: function (response) { // on success..
           $('#batch_res').html();
           $('#batch_res').html("<div class='alert alert-success' role='alert'>Batch Set Successfully<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden = 'true' >&times; </span></button></div>").fadeIn();
           $(".request_qty_"+item_id).val(sum);
           $("#batch_modal-"+item_id).modal('hide');
           //$('#bat').attr('disabled',false);
            $('#batch_res').delay(2000).fadeOut('slow');
          }
      });
      }else{
          $('.batch_res').html();
          $('.batch_res').html("<div class='alert alert-warning' role='alert'>Allow Total Batch-QTY ="+opqty+"<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden = 'true' >&times; </span></button></div>").fadeIn();
          $('.batch_res').delay(4000).fadeOut('slow');
      }
    }
     else{
       console.log ('invalid');
      }
    };
  /*End  submit batch*/

    function delete_newroww(r,item_id) {
      var i = r.parentNode.parentNode.rowIndex;
      document.getElementById("batch_table-"+item_id).deleteRow(i);
      document.getElementById("batch_table-"+$item_no).deleteRow(i);
    }

    $('#chks').on('change', function() { 
      if (this.checked) {
        $( ".chk" ).prop( "checked", true );
        $( ".chkss" ).prop( "disabled", false );
      }else{
        $( ".chk" ).prop( "checked", false );
        $( ".chkss" ).prop( "disabled", true );
        $(".chkss").val("");
      }
    });
    $('.chk').on('change', function() { 

      var chkid="";
      chkid=$(this).attr("id");
     
      $("."+chkid+"in").val("");
      if (this.checked) {      
        $("."+chkid+"in").prop( "disabled", false);
      }else{
        $("."+chkid+"in").prop( "disabled", true);
      }
    });
    
    function delete_newrow(r) {
      var i = r.parentNode.parentNode.rowIndex;
      document.getElementById("example").deleteRow(i);
      var les = $('#less').val();
      les=les-1;
      // alert(les);
      $('#less').val(les);
    }
    $(document).on('focus', '.datepicker',function(){
      var ids=$(this).attr('id');
      var iid = ids.split("-");

       if("startDate"==iid[0]){
        $(this).datepicker({
          uiLibrary: 'bootstrap4',
          iconsLibrary: 'fontawesome',
          format: 'yyyy-mm-dd',
          todayHighlight:true,
          autoclose:true,          

        });
      }else if("endDate"==iid[0]){

        $(this).datepicker({
          uiLibrary: 'bootstrap4',
          iconsLibrary: 'fontawesome',
          format: 'yyyy-mm-dd',
          todayHighlight:true,
          autoclose:true,
          minDate: function () {
            return $('#startDate-'+iid[1]).val();
          }
        });
      }
    });

  $(document).ready(function() {
  //     $('#example').DataTable();

  // } );
  $('.example').dataTable({
    "order": [[ 0, "desc" ]],
    "lengthMenu": [ [15, 30, 50, 100, 250, 500, 1000, 1500], [15, 20, 50, 100, 250, 500, 1000, 1500] ],
  "iDisplayLength": 1000,
    drawCallback: function(settings) {
      var pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');
      pagination.toggle(this.api().page.info().pages > 1);
    }

      } );
  } );
$('.datepicker').each(function(){
      $(this).datepicker({
            format: "dd/mm/yyyy",
        uiLibrary: 'bootstrap4', 
        iconsLibrary: 'materialicons'
            });
        });
  </script>
</body>
</html>